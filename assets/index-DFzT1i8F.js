(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Fe="modulepreload",Ue=function(e){return"/"+e},be={},Be=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){let h=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");o=h(n.map(d=>{if(d=Ue(d),d in be)return;be[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const r=document.createElement("link");if(r.rel=f?"stylesheet":Fe,f||(r.as="script"),r.crossOrigin="",r.href=d,c&&r.setAttribute("nonce",c),document.head.appendChild(r),f)return new Promise((m,g)=>{r.addEventListener("load",m),r.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return o.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return t().catch(s)})};function Me(){return typeof navigator<"u"&&"vibrate"in navigator}const je="vibe.flags",Ee={hapticsEnabled:!0,debug:!1};function qe(e){if(!e)return{};try{return JSON.parse(e)}catch{return{}}}function We(){if(typeof window>"u")return{...Ee};const e=qe(localStorage.getItem(je));return{...Ee,...e}}let _e=We();function Y(e){return _e[e]}let H=null,U=null,F=null;function Se(e=.5){try{if(H||(H=new(window.AudioContext||window.webkitAudioContext)),!H||U)return;U=H.createOscillator(),F=H.createGain(),U.type="square",U.frequency.value=85,F.gain.value=Math.min(1,Math.max(.05,e)),U.connect(F),F.connect(H.destination),U.start()}catch{}}function pe(e=.5){if(!F||!H)return;const t=Math.min(1,Math.max(.05,e));try{F.gain.exponentialRampToValueAtTime(t,H.currentTime+.05)}catch{F.gain.value=t}}/*! Capacitor: https://capacitorjs.com/ - MIT License */var _;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(_||(_={}));class ae extends Error{constructor(t,n,i){super(t),this.message=t,this.code=n,this.data=i}}const Ge=e=>{var t,n;return e?.androidBridge?"android":!((n=(t=e?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Ke=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},i=n.Plugins=n.Plugins||{},o=()=>t!==null?t.name:Ge(e),s=()=>o()!=="web",a=p=>{const r=d.get(p);return!!(r?.platforms.has(o())||c(p))},c=p=>{var r;return(r=n.PluginHeaders)===null||r===void 0?void 0:r.find(m=>m.name===p)},h=p=>e.console.error(p),d=new Map,f=(p,r={})=>{const m=d.get(p);if(m)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),m.proxy;const g=o(),w=c(p);let y;const v=async()=>(!y&&g in r?y=typeof r[g]=="function"?y=await r[g]():y=r[g]:t!==null&&!y&&"web"in r&&(y=typeof r.web=="function"?y=await r.web():y=r.web),y),C=(b,M)=>{var E,x;if(w){const T=w?.methods.find(S=>M===S.name);if(T)return T.rtype==="promise"?S=>n.nativePromise(p,M.toString(),S):(S,$)=>n.nativeCallback(p,M.toString(),S,$);if(b)return(E=b[M])===null||E===void 0?void 0:E.bind(b)}else{if(b)return(x=b[M])===null||x===void 0?void 0:x.bind(b);throw new ae(`"${p}" plugin is not implemented on ${g}`,_.Unimplemented)}},L=b=>{let M;const E=(...x)=>{const T=v().then(S=>{const $=C(S,b);if($){const V=$(...x);return M=V?.remove,V}else throw new ae(`"${p}.${b}()" is not implemented on ${g}`,_.Unimplemented)});return b==="addListener"&&(T.remove=async()=>M()),T};return E.toString=()=>`${b.toString()}() { [capacitor code] }`,Object.defineProperty(E,"name",{value:b,writable:!1,configurable:!1}),E},P=L("addListener"),O=L("removeListener"),K=(b,M)=>{const E=P({eventName:b},M),x=async()=>{const S=await E;O({eventName:b,callbackId:S},M)},T=new Promise(S=>E.then(()=>S({remove:x})));return T.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await x()},T},z=new Proxy({},{get(b,M){switch(M){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return w?K:P;case"removeListener":return O;default:return L(M)}}});return i[p]=z,d.set(p,{name:p,proxy:z,platforms:new Set([...Object.keys(r),...w?[g]:[]])}),z};return n.convertFileSrc||(n.convertFileSrc=p=>p),n.getPlatform=o,n.handleError=h,n.isNativePlatform=s,n.isPluginAvailable=a,n.registerPlugin=f,n.Exception=ae,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Ne=e=>e.Capacitor=Ke(e),ie=Ne(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ye=ie.registerPlugin;class Oe{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let i=!1;this.listeners[t]||(this.listeners[t]=[],i=!0),this.listeners[t].push(n);const s=this.windowListeners[t];s&&!s.registered&&this.addWindowListener(s),i&&this.sendRetainedArgumentsForEvent(t);const a=async()=>this.removeListener(t,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,i){const o=this.listeners[t];if(!o){if(i){let s=this.retainedEventArguments[t];s||(s=[]),s.push(n),this.retainedEventArguments[t]=s}return}o.forEach(s=>s(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:i=>{this.notifyListeners(n,i)}}}unimplemented(t="not implemented"){return new ie.Exception(t,_.Unimplemented)}unavailable(t="not available"){return new ie.Exception(t,_.Unavailable)}async removeListener(t,n){const i=this.listeners[t];if(!i)return;const o=i.indexOf(n);this.listeners[t].splice(o,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(i=>{this.notifyListeners(t,i)}))}}const Pe=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Le=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Xe extends Oe{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(i=>{if(i.length<=0)return;let[o,s]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=Le(o).trim(),s=Le(s).trim(),n[o]=s}),n}async setCookie(t){try{const n=Pe(t.key),i=Pe(t.value),o=`; expires=${(t.expires||"").replace("expires=","")}`,s=(t.path||"/").replace("path=",""),a=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${i||""}${o}; path=${s}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}ye("CapacitorCookies",{web:()=>new Xe});const Ye=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const o=i.result;t(o.indexOf(",")>=0?o.split(",")[1]:o)},i.onerror=o=>n(o),i.readAsDataURL(e)}),Je=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(o=>o.toLocaleLowerCase()).reduce((o,s,a)=>(o[s]=e[t[a]],o),{})},Qe=(e,t=!0)=>e?Object.entries(e).reduce((i,o)=>{const[s,a]=o;let c,h;return Array.isArray(a)?(h="",a.forEach(d=>{c=t?encodeURIComponent(d):d,h+=`${s}=${c}&`}),h.slice(0,-1)):(c=t?encodeURIComponent(a):a,h=`${s}=${c}`),`${i}&${h}`},"").substr(1):null,Ze=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),o=Je(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,c]of Object.entries(e.data||{}))s.set(a,c);n.body=s.toString()}else if(o.includes("multipart/form-data")||e.data instanceof FormData){const s=new FormData;if(e.data instanceof FormData)e.data.forEach((c,h)=>{s.append(h,c)});else for(const c of Object.keys(e.data))s.append(c,e.data[c]);n.body=s;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(o.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class et extends Oe{async request(t){const n=Ze(t,t.webFetchExtra),i=Qe(t.params,t.shouldEncodeUrlParams),o=i?`${t.url}?${i}`:t.url,s=await fetch(o,n),a=s.headers.get("content-type")||"";let{responseType:c="text"}=s.ok?t:{};a.includes("application/json")&&(c="json");let h,d;switch(c){case"arraybuffer":case"blob":d=await s.blob(),h=await Ye(d);break;case"json":h=await s.json();break;case"document":case"text":default:h=await s.text()}const f={};return s.headers.forEach((p,r)=>{f[r]=p}),{data:h,headers:f,status:s.status,url:s.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}ye("CapacitorHttp",{web:()=>new et});const ve=ye("NativeHaptics",{web:()=>({async start(){},async update(){},async stop(){}})});let D=null;(async()=>{try{D=(await Be(()=>import("./index-DeNfmMgG.js"),[])).Haptics}catch{D=null}})();let J=null,j=70,A=22,q=!1,G=!1,R=.5;const W=ie.getPlatform();let fe="medium",le=!1;function tt(e){const t=Math.max(0,Math.min(.25,0));return Math.max(.15,Math.min(1,t/.25))}function nt(e){const t=Math.max(0,Math.min(1,.5));return Math.max(.1,Math.min(1,t))}function te(e,t){const n=tt(),i=nt();return Math.max(.1,Math.min(1,i*.6+n*.4))}function ot(e,t){const n=te();return Math.round(18+n*20)}function it(e,t){const n=te();return Math.round(80-n*35)}function st(e,t){const n=te();return n>.7?"heavy":n>.4?"medium":"light"}function me(){if(console.log(`Haptic tick - platform: ${W}, usingNativeHaptics: ${G}, HapticsBasic: ${!!D}`),W!=="web"&&!G)try{ve.update({intensity:R}),console.log(`Native haptics update: ${R}`);return}catch(e){console.log(`Native haptics failed: ${e}`)}if(D){W==="ios"?(console.log(`iOS haptic impact: ${fe}`),D.impact({style:fe}).catch(e=>console.log(`iOS haptic failed: ${e}`))):W==="android"?(console.log(`Android vibrate: ${A}ms`),D.vibrate({duration:A}).catch(e=>console.log(`Android haptic failed: ${e}`))):Me()?(console.log(`Web vibrate: ${A}ms`),navigator.vibrate(A)):(console.log(`Audio fallback: ${A/40}`),q?pe(A/40):(q=!0,Se(.4)));return}Me()?(console.log(`Fallback web vibrate: ${A}ms`),navigator.vibrate(A)):(console.log(`Fallback audio: ${A/40}`),q?pe(A/40):(q=!0,Se(.4)))}function rt(){if(Y("hapticsEnabled")){if(le){at();return}if(q=!1,G=!1,W!=="web")try{console.log(`Starting native haptics with intensity: ${R}`),ve.start({intensity:R}),G=!0,le=!0,console.log("Native haptics started successfully");return}catch(e){console.log(`Native haptics start failed: ${e}`)}D&&W==="ios"&&(console.log("iOS pre-tap"),D.impact({style:"medium"}).catch(e=>console.log(`iOS pre-tap failed: ${e}`))),me(),J=window.setInterval(me,j),le=!0,console.log(`Started haptic timer with interval: ${j}ms`)}}function at(e,t){if(!Y("hapticsEnabled"))return;const n=te(),i=Math.abs(R-n)>.05;if(R=n,Y("debug")&&Math.random()<.05&&console.log(`hapticsUpdate - speed: ${e?.toFixed(3)}, pressure: ${t?.toFixed(3)}, intensity: ${n.toFixed(3)}`),G&&i)try{ve.update({intensity:R}),Y("debug")&&console.log(`Native haptics updated to: ${R.toFixed(3)}`);return}catch(o){Y("debug")&&console.log(`Native haptics update failed: ${o}`),G=!1}if(i||!J){A=ot(),fe=st();const o=it();Math.abs(o-j)>2&&J!=null?(j=o,window.clearInterval(J),J=window.setInterval(me,j)):j=o}q&&pe(te())}let l=null,B=!1,N=[],Te=.25;const ke=.15;let I=1,ce=!1;const Q=!("ontouchstart"in window)||window.navigator.maxTouchPoints===0;let Z=2;const de=[.2,.4,.7,1,1.5];let k=1,ee=!1;function ge(e,t){const n=Math.sqrt(e*t);if(Q){const i=.15*(de[Z]||1),o=i*k;return Math.random()<.01&&console.log("Web app size calculation:",{baseMultiplier:i,thicknessMultiplier:k,finalMultiplier:o}),o}else{const s=Math.max(0,Math.min(1,(n-5)/95));let a;e===0||t===0?a=.2:a=.1+s*.2;const c=.98+Math.random()*.04,h=Te*(1-ke)+a*c*ke;Te=h;const d=h*(de[Z]||1)*k;return Math.random()<.01&&console.log("Size calculation:",{smoothedMultiplier:h,sizeLevel:de[Z],thicknessMultiplier:k,finalMultiplier:d}),d}}function lt(e){const t=oe.baseHue,n=oe.saturation,i=oe.lightness,o=(Math.random()-.5)*40,s=(Math.random()-.5)*30,a=(Math.random()-.5)*20,c=(t+o+360)%360,h=Math.max(60,Math.min(100,n+s)),d=Math.max(30,Math.min(70,i+a));return`hsl(${c}, ${h}%, ${d}%)`}function ue(e){const t=[0,15,30,45,60],n=Math.floor(Math.random()*t.length),o=(t[n]||30)+(Math.random()-.5)*10,s=85+Math.random()*15,a=50+Math.random()*30;return`hsl(${o}, ${s}%, ${a}%)`}function X(e){return lt()}function ct(e,t,n,i,o,s){const a=Date.now(),c=400,h=a%c/c;e.save();const d=Math.max(o,s)*.15,f=Math.sin(h*Math.PI*8)*.5+.5;e.strokeStyle=ue(),e.lineWidth=d*(.2+f*.1),e.lineCap="round",e.globalAlpha=.95+f*.05;const p=Math.sin(h*Math.PI*2)*.8;e.beginPath(),e.moveTo(t-d*.8,n+p),e.lineTo(t+d*.8,n+p),e.stroke();const r=25;for(let y=0;y<r;y++){const v=t-d*.7+y*d*.056,C=Math.sin((h+y*.08)*Math.PI*4)*2,L=.4+f*.8,P=.8+f*.2;e.globalAlpha=P,e.fillStyle=ue(),e.beginPath(),e.arc(v,n+C,L,0,2*Math.PI),e.fill()}const m=d*.15,g=h*Math.PI*6,w=12;for(let y=0;y<w;y++){const v=g+y*Math.PI*2/w,C=t+Math.cos(v)*m,L=n+Math.sin(v)*m,P=.2+f*.6,O=.6+f*.2;e.globalAlpha=O,e.fillStyle=ue(),e.beginPath(),e.arc(C,L,P,0,2*Math.PI),e.fill()}e.restore()}function Ce(e,t,n,i,o,s){ct(e,t,n,i,o,s)}function xe(e,t,n,i){const o=Math.floor(i/10);for(let s=0;s<o;s++){const a=Math.PI*2*s/o,c=i*(.8+Math.random()*.4),h=t+Math.cos(a)*c,d=n+Math.sin(a)*c,f=2+Math.random()*4;e.save(),e.globalAlpha=.6+Math.random()*.4,e.fillStyle="white",e.beginPath(),e.arc(h,d,f,0,2*Math.PI),e.fill(),e.restore()}}function Ae(e,t,n){const i=e.getBoundingClientRect();return{x:t-i.left,y:n-i.top}}function he(e){const t=window.visualViewport,n=t?t.width:window.innerWidth,i=t?t.height:window.innerHeight,o=window.devicePixelRatio||1;e.width=Math.max(1,Math.floor(n*o)),e.height=Math.max(1,Math.floor(i*o)),e.style.width=n+"px",e.style.height=i+"px",console.log("Canvas resized to HD:",e.width,"x",e.height,"devicePixelRatio:",o),l&&(l.scale(o,o),l.lineCap="round",l.lineJoin="round",l.strokeStyle="#111",se(e))}function dt(e){if(l=e.getContext("2d",{alpha:!0,antialias:!0,willReadFrequently:!1}),console.log("Canvas context created:",!!l,"Canvas element:",!!e),!l){console.error("Failed to get 2D context!");return}l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high",l.lineCap="round",l.lineJoin="round",l.strokeStyle="#111",se(e),console.log("Canvas context initialized successfully")}function se(e){if(!l){console.error("Cannot clear canvas - no context!");return}console.log("Clearing canvas, size:",e.width,"x",e.height);const t=l.createLinearGradient(0,0,e.width,e.height);t.addColorStop(0,"#1a1a2e"),t.addColorStop(.5,"#16213e"),t.addColorStop(1,"#0f3460"),l.fillStyle=t,l.fillRect(0,0,e.width,e.height),l.fillStyle="rgba(255, 255, 255, 0.3)";for(let n=0;n<50;n++){const i=Math.random()*e.width,o=Math.random()*e.height,s=Math.random()*2+1;l.beginPath(),l.arc(i,o,s,0,2*Math.PI),l.fill()}l.lineWidth=10,console.log("Canvas cleared and background drawn")}function Ie(e){console.log("Pointer Event Debug:",{pointerType:e.pointerType,pressure:e.pressure,width:e.width,height:e.height,pointerId:e.pointerId,isPrimary:e.isPrimary,timeStamp:e.timeStamp})}function ut(e){e.addEventListener("touchstart",n=>n.preventDefault(),{passive:!1}),e.addEventListener("touchmove",n=>n.preventDefault(),{passive:!1}),e.addEventListener("touchend",n=>n.preventDefault(),{passive:!1}),e.addEventListener("pointerdown",n=>{if(n.pointerType==="pen"&&Ie(n),B||I===2&&ce)return;const i=n.pointerType==="pen",o=n.pointerType==="touch";n.pointerType;let s=n.pressure!==void 0?n.pressure:.5;i&&(s=Math.max(.1,Math.min(1,s)),console.log("Apple Pencil detected - pressure:",s)),e.setPointerCapture(n.pointerId),B=!0,I===2&&(ce=!0),N=[];const{x:a,y:c}=Ae(e,n.clientX,n.clientY);let h=ge(n.width||1,n.height||1);if(i?h*=.3+s*.7:o&&(h*=.5+s*.5),N.push({x:a,y:c,t:n.timeStamp}),rt(),l){const d=n.width||1,f=n.height||1;let p,r,m;Q?(p=45,r=45,m=1):(p=Math.max(d,30),r=Math.max(f,30),m=d>1||f>1?1.2:1);const g=p*h*m,w=r*h*m,y=Math.max(g,w);if(I===2)Ce(l,a,c,h,g,w);else{l.save(),l.globalAlpha=.8,console.log("Drawing dot at:",a,c,"size:",g,"x",w,"pressure:",s);const v=1+Math.sin(Date.now()/200)*.1,C=g/2*v,L=w/2*v;ee?(l.globalCompositeOperation="source-over",l.fillStyle="#A8A8DB"):(l.globalCompositeOperation="source-over",l.fillStyle=X());const P=l.createRadialGradient(a,c,0,a,c,Math.max(C,L));P.addColorStop(0,X()),P.addColorStop(.7,X()),P.addColorStop(1,X()),l.fillStyle=P,l.beginPath(),l.ellipse(a,c,C,L,0,0,2*Math.PI),l.fill(),l.restore(),y>20&&xe(l,a,c,y)}}else console.error("Canvas context is null! Cannot draw.")}),e.addEventListener("pointermove",n=>{if(n.pointerType==="pen"&&B&&Ie(n),!B)return;const{x:i,y:o}=Ae(e,n.clientX,n.clientY),s=N[N.length-1],a=Math.max(.001,n.timeStamp-s.t),c=i-s.x,h=o-s.y,d=Math.hypot(c,h)/a,f=n.pointerType==="pen",p=n.pointerType==="touch";n.pointerType;let r=n.pressure!==void 0?n.pressure:.5;f&&(r=Math.max(.1,Math.min(1,r)));let m=ge(n.width||1,n.height||1);if(f?m*=.3+r*.7:p&&(m*=.5+r*.5),N.push({x:i,y:o,t:n.timeStamp,speed:d}),!l)return;const g=Math.hypot(i-s.x,o-s.y);let w;f?w=I===2?.5:.8:w=I===2?1:Q?.8:1.5;const y=Math.max(1,Math.ceil(g/w));let v;f?v=I===2?3:3.5:v=I===2||Q?2.5:2;const C=Math.max(3,Math.ceil(y*v)),L=n.width||1,P=n.height||1;let O,K,z;Q?(O=45,K=45,z=1):(O=Math.max(L,30),K=Math.max(P,30),z=L>1||P>1?1.2:1);const b=O*m*z,M=K*m*z;l.save(),l.globalAlpha=.8;for(let E=0;E<=C;E++){const x=E/C,T=s.x+(i-s.x)*x,S=s.y+(o-s.y)*x;if(I===2)Ce(l,T,S,m,b,M);else{let $;f?$=.98+Math.random()*.04:$=.95+Math.random()*.1;const V=1+Math.sin((Date.now()+E*40)/160)*.03,Re=b/2*$*V,Ve=M/2*$*V;if(ee?(l.globalCompositeOperation="source-over",l.fillStyle="#151E35"):(l.globalCompositeOperation="source-over",l.fillStyle=X()),l.beginPath(),l.ellipse(T,S,Re,Ve,0,0,2*Math.PI),l.fill(),Math.max(b,M)>15){let re;f?re=.4:re=.2,Math.random()<re&&(l.save(),l.globalAlpha=.4,xe(l,T,S,Math.max(b,M)/3),l.restore())}}}l.restore()});const t=n=>{if(B){B=!1,I===2&&(ce=!1),e.releasePointerCapture(n.pointerId);try{if(u&&u.state!=="suspended"){const i=u.createOscillator(),o=u.createGain();i.connect(o),o.connect(u.destination),i.frequency.setValueAtTime(400,u.currentTime),i.frequency.exponentialRampToValueAtTime(200,u.currentTime+.2),o.gain.setValueAtTime(.15,u.currentTime),o.gain.exponentialRampToValueAtTime(.01,u.currentTime+.2),i.start(u.currentTime),i.stop(u.currentTime+.2)}}catch(i){console.log("End sound failed:",i)}}};e.addEventListener("pointerup",t),e.addEventListener("pointercancel",t),e.addEventListener("pointerleave",t)}let u=null,ne=!1;function ze(){if(!ne)try{u=new(window.AudioContext||window.webkitAudioContext),ne=!0,console.log("Audio context initialized")}catch(e){console.log("Audio not supported"),console.log("Audio not supported",e),ne=!0}}function He(){(!u||u.state==="suspended")&&u?.resume();try{if(!u)return;const e=u.createOscillator(),t=u.createGain();e.connect(t),t.connect(u.destination),e.frequency.setValueAtTime(400,u.currentTime),e.frequency.exponentialRampToValueAtTime(800,u.currentTime+.2),e.frequency.exponentialRampToValueAtTime(600,u.currentTime+.4),e.frequency.exponentialRampToValueAtTime(900,u.currentTime+.6),t.gain.setValueAtTime(.2,u.currentTime),t.gain.exponentialRampToValueAtTime(.4,u.currentTime+.2),t.gain.exponentialRampToValueAtTime(.2,u.currentTime+.4),t.gain.exponentialRampToValueAtTime(.01,u.currentTime+.6),e.start(u.currentTime),e.stop(u.currentTime+.6)}catch(e){console.log("Audio playback failed:",e)}}function ht(){(!u||u.state==="suspended")&&u?.resume();try{if(!u)return;const e=u.createOscillator(),t=u.createGain();e.connect(t),t.connect(u.destination),e.frequency.setValueAtTime(300,u.currentTime),e.frequency.exponentialRampToValueAtTime(1500,u.currentTime+.3),t.gain.setValueAtTime(.3,u.currentTime),t.gain.exponentialRampToValueAtTime(.01,u.currentTime+.3),e.start(u.currentTime),e.stop(u.currentTime+.3)}catch(e){console.log("Audio playback failed:",e)}}function we(){ne||(ze(),He())}document.addEventListener("click",we);document.addEventListener("touchstart",we);document.addEventListener("keydown",we);ze();function pt(){const e=document.getElementById("info-popup");e&&(e.style.display="block")}function De(){const e=document.getElementById("info-popup");e&&(e.style.display="none")}window.showInfoPopup=pt;window.hideInfoPopup=De;document.addEventListener("click",e=>{const t=document.getElementById("info-popup");t&&e.target===t&&De()});let oe={baseHue:216,saturation:90,lightness:50};function $e(){const e=Math.floor(Math.random()*360),t=[70,75,80,85,90,95,100],n=t[Math.floor(Math.random()*t.length)],i=[40,45,50,55,60],o=i[Math.floor(Math.random()*i.length)],s=Math.random()*.6+.4,a=Math.random()*3+1,c=Math.floor(Math.random()*12)+4,h=Math.random()*.8+.2,d=Math.random()*.3+.1,f=Math.random()*2+.8;oe={baseHue:e,saturation:n,lightness:o,sparkleIntensity:s,sparkleSize:a,sparkleCount:c,glowIntensity:h,pulseSpeed:d,sizeMultiplier:f},console.log(`Generated aggressive pen style: hsl(${e}, ${n}%, ${o}%) - Intensity: ${s.toFixed(2)}`)}function ft(){const e=document.getElementById("app-canvas");if(console.log("Init function called, canvas found:",!!e),!e){console.error("Canvas element not found!");return}console.log("Device capabilities:",{maxTouchPoints:window.navigator.maxTouchPoints,hasPointerEvents:"PointerEvent"in window}),document.addEventListener("contextmenu",r=>r.preventDefault()),document.addEventListener("selectstart",r=>r.preventDefault()),document.addEventListener("dragstart",r=>r.preventDefault()),document.addEventListener("gesturestart",r=>r.preventDefault()),document.addEventListener("gesturechange",r=>r.preventDefault()),document.addEventListener("gestureend",r=>r.preventDefault()),e.addEventListener("contextmenu",r=>r.preventDefault()),e.addEventListener("selectstart",r=>r.preventDefault()),e.addEventListener("dragstart",r=>r.preventDefault()),e.style.touchAction="none",e.style.webkitTouchCallout="none",e.style.webkitUserSelect="none",e.style.userSelect="none",console.log("Initializing canvas context..."),dt(e),console.log("Canvas context initialized, ctx:",!!l),he(e),l&&e&&(se(e),console.log("Canvas fully initialized and cleared"));const t=()=>he(e);window.addEventListener("resize",t),window.addEventListener("orientationchange",t),window.visualViewport?.addEventListener("resize",t),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&he(e)}),console.log("Attaching pointer handlers..."),ut(e),console.log("Pointer handlers attached"),setTimeout(()=>{const r=document.getElementById("splash-screen");r&&(ht(),r.classList.add("fade-out"),setTimeout(()=>{r.style.display="none";const m=document.querySelector(".one-front-credit");m&&m.classList.add("show")},300))},300),setTimeout(()=>{He()},200);const n=document.getElementById("style-switch");if(n){const r=()=>{$e(),Z=Math.floor(Math.random()*5);const g=Math.floor(Math.random()*360);n.style.color=`hsl(${g}, 85%, 55%)`,console.log(`Generated new random style and changed to ${["tiny","small","medium","large","huge"][Z]} size!`)};n.addEventListener("click",r),n.addEventListener("touchstart",g=>{g.preventDefault(),r()}),n.addEventListener("touchend",g=>{g.preventDefault()}),$e();const m=Math.floor(Math.random()*360);n.style.color=`hsl(${m}, 85%, 55%)`}const i=document.getElementById("thickness-slider"),o=document.getElementById("vibration-knob"),s=document.getElementById("thickness-value");if(console.log("Thickness slider found:",!!i),i){const r=()=>{k=parseFloat(i.value),console.log("🎯 Thickness changed to:",k,"Slider value:",i.value),s&&(s.textContent=i.value),l&&e&&console.log("🔄 Thickness updated, next draw will use:",k)};i.addEventListener("input",r),i.addEventListener("change",r),k=parseFloat(i.value),console.log("🎯 Initial thickness:",k),s&&(s.textContent=i.value);const m=ge(1,1);console.log("🧪 Test size calculation with thickness",k,":",m)}else console.error("Thickness slider not found!");let a=1;const c=()=>{o&&(a=parseFloat(o.value)),window.vibrationIntensity=a};o?.addEventListener("input",c),c();const h=r=>{if(!i)return;const m=parseFloat(i.value),g=parseFloat(i.step)||.2,w=parseFloat(i.min)||.2,y=parseFloat(i.max)||5;if(r.key==="ArrowLeft"||r.key==="ArrowDown"){const v=Math.max(w,m-g);i.value=v.toString(),k=v,console.log("🎯 Thickness decreased to:",v)}else if(r.key==="ArrowRight"||r.key==="ArrowUp"){const v=Math.min(y,m+g);i.value=v.toString(),k=v,console.log("🎯 Thickness increased to:",v)}};document.addEventListener("keydown",h);const d=document.getElementById("eraser");if(d){const r=()=>{ee=!ee,ee?(d.style.backgroundColor="rgba(255, 255, 255, 0.2)",d.style.border="2px solid rgba(255, 255, 255, 0.5)",console.log("Eraser mode activated! 🧽")):(d.style.backgroundColor="transparent",d.style.border="none",console.log("Drawing mode activated! ✏️"))};d.addEventListener("click",r),d.addEventListener("touchstart",m=>{m.preventDefault(),r()}),d.addEventListener("touchend",m=>{m.preventDefault()})}const f=document.getElementById("clear-canvas");if(f){const r=()=>{l&&e&&(se(e),console.log("Canvas cleared! ✨"))};f.addEventListener("click",r),f.addEventListener("touchstart",r),f.addEventListener("touchend",r)}function p(r){I=r,console.log(`Switched to Style ${r}`),document.querySelectorAll(".style-button").forEach((m,g)=>{m.classList.toggle("active",g===r-1)})}document.getElementById("style-1")?.addEventListener("click",()=>p(1)),document.getElementById("style-2")?.addEventListener("click",()=>p(2)),document.getElementById("style-3")?.addEventListener("click",()=>p(3))}document.addEventListener("DOMContentLoaded",ft);export{Oe as W,Be as _,ye as r};
